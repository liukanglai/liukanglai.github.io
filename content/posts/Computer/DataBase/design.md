---
title: ""
draft: false
tags: ["first"]
author: "liukanglai"
# author: ["Me", "You"] # multiple authors
showToc: true
TocOpen: false
hidemeta: false
comments: false
description: "Desc Text."
canonicalURL: "https://canonical.url/to/page"
disableHLJS: true # to disable highlightjs
disableShare: false
disableHLJS: false
hideSummary: false
searchHidden: true
ShowReadingTime: true
ShowBreadCrumbs: true
ShowPostNavLinks: true
ShowWordCount: true
ShowRssButtonInSectionTermList: true
UseHugoToc: true
cover:
    image: "<image path/url>" # image path/url
    alt: "<alt text>" # alt text
    caption: "<text>" # display caption under cover
    relative: false # when using page bundles set this to true
    hidden: true # only hide on current single page
editPost:
    URL: "https://github.com/<path_to_repo>/content"
    Text: "Suggest Changes" # edit text
    appendFilePath: true # to append file path to Edit link
---#《城市共享单车管理系统》需求设计说明书

## 1.概述

本系统

-

### 1.1 系统概述

本系统为管理海贼王人物信息系统（简化），建立人物，事件基本单位；方便人员查询信息，发布内容。更好的理清思路，把握人员关系，了解事物的发展过程。利用系统数据库的便利性，处理了政府，海军，海贼三方人物，事件的逻辑关系，既有静态平衡，又有动态扩展。当然，本系统只是一个“小海贼世界”，目的为了更好的掌握数据库系统相关内容，完成数据库课设任务，更宏大的世界留待未来 ...

## 1.2 运行环境

### 1.2.1 软件环境

|    类别    |    名称    |                 版本                  |
| :--------: | :--------: | :-----------------------------------: |
|  操作系统  | Arch Linux | 2021.12.01 linux 内核(5.15.6-arch2-1) |
| 数据库平台 |  mariadb   |               10.6.5-1                |
|  应用平台  |  DataGrip  |               2021.3.1                |

## 2. 功能描述

### 2.1 模块概述

该系统的用户分为三类,分别为:

1. 海贼
2. 政府
3. 海军

模块有： 政府管理模块, 海贼模块, 海军模块, 此外，加入了岛屿，商店，赏金模块, 相应的事件有抢劫，占领岛，抓捕，收复岛。

政府模块：该模块为政府管理员查询和添加任务信息和事务，实现对其监督通过该数据模块，政府管理员可以查询属于政府的人员个人信息，查询所颁发所有的任务，查询海贼的信息（比如海贼的实力和所拥有的特殊能力等等）可以通过该模块进行任务的颁发（击杀海贼/占领岛屿），和任务的查询还可以更新颁发任务的酬劳（在海贼抢占岛屿和船只的事件完成后，更新其酬劳）其他人员可以查询所颁发任务的酬劳（海贼的赏金）

海贼模块：该模块为海贼管理人员查询更改海贼的个人信息（能力等），实现对其的监督通过该数据模块，海贼管理员查询和更改海贼所在船只，正在干的事情（抢占岛屿）当海贼抢占岛屿和船只成功或失败的时候，更改海贼所干事情的状态并利 用一个触发器来去政府模块更新任务的酬劳 也更新海贼的能力值；海贼的普通人员：可以查询海贼信息

海军模块：该模块为海军管理人员查询政府所颁发任务的信息和更改任务的状态（未接取/以接取/已完成）海军管理人员还可在海军人员完成任务的时候，将会更改海军人员的能力值信息海军的普通人员可以查询任务的状态和任务的详细信息（比如任务的难度和任务的酬劳）同时还可以更改任务的状态信息（自己是否接受该任务）

岛屿模块：该模块为岛屿模块管理人员查询岛屿所在的位置，岛屿所属船队或海军名称和岛屿所属的级别还可以在其他人攻占岛屿后，更新岛屿拥有人的信息 ，如占领成功，将用一个触发器更新能力值的信息（攻占成功的人能力值增加，攻占失败的人能力值减少）
商店
成就

系统详细指南（持续更新中）：

```
大势力用来标识海军，海贼，政府人员，小势力有海贼团名，海军队名
- 人物表为一大表，存所有人物
- 相应的海贼团，海军队人物表可从人物表中根据小势力导出，为视图(可直接用存储过程表示 select，或可不用视图)，要插入队员时，就在人物表中插入，

小势力表
- 单独的一个表，记录了所有的海军队，海贼团的总体信息

- 政府事务表， 海贼团事务表， 海军队事务表相应三个大表，每个小势力的事务表，也可导出。
- 岛屿表: 所有人可见
- 天眼表
- 悬赏令表


- 岛屿:
  - 有名称，级别(1-10)，所处小势力，岛上还有恶魔果实,金钱(根据级别来赋值)(当岛屿被重复强时，值刷新！)
  - 果实数=级别，金钱=级别*$100000，武力值=级别*1000

- 商店(为上帝的安排，天眼检测不到)(---------------------------)
  - 只为海贼服务，只有船长才能使用商店，相应事务由系统完成
  - 可以购买恶魔果实($100,000,000)
  - 撤销悬赏令，需要悬赏金的三倍，撤销后，直接从悬赏令表删除
  - 购买被抓捕海贼团，10倍赏金，购买后海贼团状态变化，自由
  - 钱直接从海贼团扣除

1. 海贼：
  - 普通船员，无权限发起事务，只能查询，想要发起事务，在海贼团事务表中插入(只有插入权限)
  - 查询表：相应的海贼团全人物与海贼团属性；悬赏令表，政府事务表；海贼团事务表
  - 海贼团事务表，只能由船长处理，有发起人，事务描述，完成状态三个选项，船长决定是否进行事务，仅对内部人员可见
  - 船长登录后：
      可查询表：政府事务表，悬赏令表，海贼团事务表 (查询了海贼团事务表后，可决定是否进行相应事务(行动：根据武力值判断是否成功；不行动，处理后更改事务完成状态))
      可发起事务，以海贼团为单位：
        抢劫一个海军队，查询武力值判断是否成功，成功后，海贼团获得金钱，全员提高武力值（100），(若其手中有抓捕的海贼团，队长可以选择并入，也可以释放)(删除)
        占领岛，查看岛的级别判断成功，全员提高武力值，海贼团金钱增加，获得恶魔果实
        分配恶魔果实，一旦分配，武力值立刻加，每个人只能吃一颗
      可使用商店(---)
  - 海贼团有一状态，自由，被抓，入牢
2. 政府：
  - 天眼表：政府的监管部门，记录海贼抢劫，占岛，海军抓捕，事务一旦发生，计入事务记录表中，有相应的小势力名，事务描述，仅政府人员可见，可改
  - 查询天眼表，以决定在政府事务表发布抓捕海贼团，收复岛事务，对于抓到海贼团和收复岛屿的海军队，更改事务表的相应状态为已完成，系统自动给海军队赏金，修改海贼团，岛屿相应的状态
  - 更新悬赏令表，一旦更改，相应海贼团赏金更改
  - 政府事务表，悬赏令表对所有人可见，但只有政府能改
3. 海军：
  - 以海军队为单位接政府事务表上的内容，得到武力值，赏金对海军无用（可完善），用来被海贼抢，被抢后武力值下降...
  - 只有队长能接内容，机制参见海贼，有海军队事务表
4. 创建新用户(删除)
  - 组建海贼团
  - 入海贼团，填相应的海贼团事务表 （入海军同）
  - 可直接成为政府人员

> 为方便管理，事务都是以海贼团，海军队为单位动作，由队长决定

......
(未完待续)
???:
- 一个政府事务只能一个队接...
- 考虑加入所处岛
- 成就系统？
```

## 3. 数据描述

### 3.1 数据流图:

1. 政府人员管理：

2. 海贼队长：

3. 普通海贼：

4. 海军队长：

5. 普通海军：

### 3.2 数据字典:

#### 3.2.1 数据项条目

| 编号 | 名称 |      别名      |  类型   | 长度  |   取值范围   |   简述   |
| :--: | :--: | :------------: | :-----: | :---: | :----------: | :------: |
|  L1  |  ID  |    人物编码    |   int   | 10 位 | 所有汉或英文 | 人物姓名 |
|  L1  |  ID  |      姓名      | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
|  L1  |  ID  |      年龄      | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
|  L1  |  ID  |    恶魔果实    |   bit   | 1 位  |    0 或 1    | 人物姓名 |
|  L1  |  ID  |      霸气      |   bit   | 1 位  |    0 或 1    | 人物姓名 |
|  L1  |  ID  |     武力值     | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
|  L1  |  ID  |      赏金      |   int   | 10 位 | 所有汉或英文 | 人物姓名 |
|  L1  |  ID  |      金钱      |   int   | 10 位 | 所有汉或英文 | 人物姓名 |
|  L1  |  ID  |    职务地位    | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
|  L1  |  ID  |   小势力 ID    | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
|  L1  |  ID  |    大势力名    | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
|  L1  |  ID  |    小势力名    | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
|  L1  |  ID  | 现有恶魔果实数 | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
|  L1  |  ID  |     总赏金     | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
|  L1  |  ID  |     总金额     | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
|  L1  |  ID  |    总武力值    | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
|  L1  |  ID  |     总人数     | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
|  L1  |  ID  |      状态      | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
|  L1  |  ID  |    事务描述    | varchar | 10 位 | 所有汉或英文 | 人物姓名 |

???
| L1 | ID | 事务对象 ID | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
| L1 | ID | 对象名 | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
| L1 | ID | 请求人 | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
???

| L1 | ID | 岛屿名 | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
| L1 | ID | 岛屿级别 | varchar | 10 位 | 所有汉或英文 | 人物姓名 |
| L1 | ID | 岛屿恶魔果实数 | varchar | 10 位 | 所有汉或英文 | 人物姓名 |

...

#### 3.2.2 数据流条目

| 编号 | 数据流名称 | 组成 | 来源 | 去向 | 流量 | 简述 |
| :--: | :--------: | :--: | :--: | :--: | :--: | :--: |
|  F1  |  登陆信息  |      |      |      |      |      |

#### 3.2.3 数据对象表

|   表   | 英文名称 |
| :----: | :------: |
| 人物表 |  human   |

- 人物 human(ID, name, age, department, )
- 小势力表（ID, 势力名，大势力，恶魔果实数)
- 政府事务表
- 悬赏令表
- 海贼团事务表
- 海军队事务表
